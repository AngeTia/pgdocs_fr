<!--
$PostgreSQL: pgsql/doc/src/sgml/ref/alter_default_privileges.sgml,v 1.5 2010-04-05 01:58:03 tgl Exp $
PostgreSQL documentation
-->

<refentry id="sql-alterdefaultprivileges">
 <refmeta>
  <refentrytitle>ALTER DEFAULT PRIVILEGES</refentrytitle>
  <manvolnum>7</manvolnum>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>ALTER DEFAULT PRIVILEGES</refname>
  <refpurpose>dÃ©finit les droits d'accÃšs par dÃ©faut</refpurpose>
 </refnamediv>

 <indexterm zone="sql-alterdefaultprivileges">
  <primary>ALTER DEFAULT PRIVILEGES</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
ALTER DEFAULT PRIVILEGES
    [ FOR { ROLE | USER } <replaceable>cible_rÃŽle</replaceable> [, ...] ]
    [ IN SCHEMA <replaceable>nom_schÃ©ma</replaceable> [, ...] ]
    <replaceable class="parameter">grant_ou_revoke_rÃ©duit</replaceable>

<phrase>where <replaceable class="parameter">grant_ou_revoke_rÃ©duit</replaceable> is one of:</phrase>

GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [,...] | ALL [ PRIVILEGES ] }
    ON TABLES
    TO { [ GROUP ] <replaceable class="PARAMETER">nom_rÃŽle</replaceable> | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { { USAGE | SELECT | UPDATE }
    [,...] | ALL [ PRIVILEGES ] }
    ON SEQUENCES
    TO { [ GROUP ] <replaceable class="PARAMETER">nom_rÃŽle</replaceable> | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { EXECUTE | ALL [ PRIVILEGES ] }
    ON FUNCTIONS
    TO { [ GROUP ] <replaceable class="PARAMETER">nom_rÃŽle</replaceable> | PUBLIC } [, ...] [ WITH GRANT OPTION ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [,...] | ALL [ PRIVILEGES ] }
    ON TABLES
    FROM { [ GROUP ] <replaceable class="PARAMETER">nom_rÃŽle</replaceable> | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { USAGE | SELECT | UPDATE }
    [,...] | ALL [ PRIVILEGES ] }
    ON SEQUENCES
    FROM { [ GROUP ] <replaceable class="PARAMETER">nom_rÃŽle</replaceable> | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { EXECUTE | ALL [ PRIVILEGES ] }
    ON FUNCTIONS
    FROM { [ GROUP ] <replaceable class="PARAMETER">nom_rÃŽle</replaceable> | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]
</synopsis>
 </refsynopsisdiv>

 <refsect1 id="sql-alterdefaultprivileges-description">
  <title>Description</title>

  <para>
   <command>ALTER DEFAULT PRIVILEGES</command> vous permet de configurer les
   droits qui seront appliquÃ©s aux objets qui seront crÃ©Ã©s dans le futur.
   (Cela ne modifie pas les droits affectÃ©s Ã  des objets dÃ©jÃ  existants.)
   Actuellement, seuls les droits pour les tables (ceci incluant les vues),
   les sÃ©quences et les fonctions peuvent Ãªtre modifiÃ©s.
  </para>

  <para>
   Vous pouvez modifier les droits par dÃ©faut seulement pour les objets qui
   seront crÃ©Ã©s par vous ou par des rÃŽles dont vous Ãªtes membres. Les droits
   peuvent Ãªtre configurÃ©s de maniÃšre globale (c'est-Ã -dire pour tous les
   objets de la base de donnÃ©es) ou pour les objets des schÃ©mas indiquÃ©s. Les
   droits par dÃ©faut spÃ©cifiques par schÃ©ma sont ajoutÃ©s aux droits par dÃ©faut
   globaux pour le type d'objet particulier.
  </para>

  <para>
   Comme indiquÃ© dans <xref linkend="sql-grant" />, les droits par dÃ©faut de
   tout type d'objet donnent tous les droits au propriÃ©taire de l'objet et
   peut aussi donner certains droits Ã  <literal>PUBLIC</literal>. NÃ©anmoins,
   ce comportement peut Ãªtre changÃ© par une modification des droits par dÃ©faut
   globaux avec <command>ALTER DEFAULT PRIVILEGES</command>.
  </para>

 <refsect2>
  <title>ParamÃštres</title>

  <variablelist>
   <varlistentry>
    <term><replaceable>cible_rÃŽle</replaceable></term>
    <listitem>
     <para>
      Le nom d'un rÃŽle existant dont le rÃŽle actuel est membre. Si
      <literal>FOR ROLE</literal> est omis, le rÃŽle courant est utilisÃ©.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable>nom_schÃ©ma</replaceable></term>
    <listitem>
     <para>
      Le nom d'un schÃ©ma existant. Chaque <replaceable>cible_rÃŽle</replaceable>
      doit avoir les droits <literal>CREATE</literal> pour chaque schÃ©ma
      spÃ©cifiÃ©. Si <literal>IN SCHEMA</literal> est omis, les droits globaux
      par dÃ©faut sont modifiÃ©s.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable>nom_rÃŽle</replaceable></term>
    <listitem>
     <para>
      Le nom d'un rÃŽle existant pour donner ou reprendre les droits. Ce
      paramÃštre, et tous les autres paramÃštres dans
      <replaceable class="parameter">grant_ou_revoke_rÃ©duit</replaceable>,
      agissent de la faÃ§on dÃ©crite dans <xref linkend="sql-grant" /> ou
      <xref linkend="sql-revoke" />, sauf qu'un permet de configurer les
      droits pour une classe complÃšte d'objets plutÃŽt que pour des objets
      nommÃ©s spÃ©cifiques.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect2>
 </refsect1>

 <refsect1 id="sql-alterdefaultprivileges-notes">
  <title>Notes</title>

  <para>
   Utilisez la commande <command>\ddp</command> de <xref linkend="app-psql" />
   pour otbenir des informations sur les droits par dÃ©faut. La signification
   des valeurs de droit est identique Ã  celles utilisÃ©es par
   <command>\dp</command> et est expliquÃ© dans <xref linkend="sql-grant" />.
  </para>

  <para>
   Si vous souhaitez supprimer un rÃŽle dont les droits par dÃ©faut ont Ã©tÃ©
   modifiÃ©s, il est nÃ©cessaire d'inverser les modifications dans ses droits
   par dÃ©faut ou d'utiliser <command>DROP OWNED BY</command> pour supprimer
   l'entrÃ©e des droits par dÃ©faut pour le rÃŽle.
  </para>
 </refsect1>

 <refsect1 id="sql-alterdefaultprivileges-examples">
  <title>Examples</title>

  <para>
   Donner le droit SELECT Ã  tout le monde pour toutes les tables (et vues) que
   vous pourriez crÃ©er plus tard dans le schÃ©ma <literal>mon_schema</literal>,
   et permettre au rÃŽle <literal>webuser</literal> d'utiliser en plus
   INSERT&nbsp;:

<programlisting>
ALTER DEFAULT PRIVILEGES IN SCHEMA mon_schema GRANT SELECT ON TABLES TO PUBLIC;
ALTER DEFAULT PRIVILEGES IN SCHEMA mon_schema GRANT INSERT ON TABLES TO webuser;
</programlisting>
  </para>

  <para>
   Annuler ce qui a Ã©tÃ© fait ci-dessus, pour que les tables crÃ©Ã©es par la
   suite n'aient pas plus de droits qu'en standard&nbsp;:

<programlisting>
ALTER DEFAULT PRIVILEGES IN SCHEMA myschema REVOKE SELECT ON TABLES FROM PUBLIC;
ALTER DEFAULT PRIVILEGES IN SCHEMA myschema REVOKE INSERT ON TABLES FROM webuser;
</programlisting>
  </para>

  <para>
   Supprimer le droit publique EXECUTE qui est normalement donnÃ© aux fonctions,
   pour toutes les fonctions crÃ©Ã©es aprÃšs coup par le rÃŽle
   <literal>admin</literal>&nbsp;:

<programlisting>
ALTER DEFAULT PRIVILEGES FOR ROLE admin REVOKE EXECUTE ON FUNCTIONS FROM PUBLIC;
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>CompatibilitÃ©</title>

  <para>
   Il n'existe pas d'instruction <command>ALTER DEFAULT PRIVILEGES</command>
   dans le standard SQL.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-grant" /></member>
   <member><xref linkend="sql-revoke" /></member>
  </simplelist>
 </refsect1>

</refentry>
