<?xml version="1.0" encoding="UTF-8"?>
<!-- Dernière modification
     le       $Date$
     par      $Author$
     révision $Revision$ -->
<!-- SAS 20060616 -->

<refentry id="sql-altertablespace">
 <indexterm zone="sql-altertablespace">
  <primary>ALTER TABLESPACE</primary>
 </indexterm>

 <refmeta>
  <refentrytitle>ALTER TABLESPACE</refentrytitle>
  <manvolnum>7</manvolnum>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>ALTER TABLESPACE</refname>
  <refpurpose>Modifier la définition d'un tablespace or affect objects of a tablespace</refpurpose>
 </refnamediv>  
  
 <refsynopsisdiv>
<synopsis>ALTER TABLESPACE <replaceable>nom</replaceable> RENAME TO <replaceable>nouveau_nom</replaceable>
ALTER TABLESPACE <replaceable>nom</replaceable> OWNER TO <replaceable>nouveau_propriétaire</replaceable>
ALTER TABLESPACE <replaceable>name</replaceable> SET ( <replaceable class="parameter">option_tablespace</replaceable> = <replaceable class="PARAMETER">valeur</replaceable> [, ... ] )
ALTER TABLESPACE <replaceable>name</replaceable> RESET ( <replaceable class="parameter">option_tablespace</replaceable> [, ... ] )
ALTER TABLESPACE <replaceable>name</replaceable> MOVE { ALL | TABLES | INDEXES | MATERIALIZED VIEWS } [ OWNED BY <replaceable class="PARAMETER">role_name</replaceable> [, ...] ] TO <replaceable>new_tablespace</replaceable> [ NOWAIT ]
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>ALTER TABLESPACE</command> modifie la définition d'un tablespace.
   <command>ALTER TABLESPACE</command> can be used to change the definition of
   a tablespace or to migrate objects in the current database between
   tablespaces.
  </para>

  <para>
   Seul le propriétaire du tablespace peut change the definition of a tablespace.
   Pour modifier le propriétaire, il est nécessaire
   d'être un membre direct ou indirect du nouveau rôle propriétaire
   (les superutilisateurs ont automatiquement tous ces droits).

   Users may use ALTER TABLESPACE ... MOVE to move objects between tablespaces.
   ALL will move all tables, indexes and materialized views while specifying
   TABLES will move only tables (but not their indexes), INDEXES will only move
   indexes (including those underneath materialized views, but not tables) and
   MATERIALIZED VIEWS will only move the table relation of the materialized
   view (but no indexes associated with it).  Users may also specify a list of
   roles whose objects are to be moved using OWNED BY.

   Users must have CREATE rights on the new tablespace and be considered an
   owner (either directly or indirectly) on all objects to be moved.  Note that
   the superuser is considered an owner of all objects and therefore an
   ALTER TABLESPACE ... MOVE ALL issued by the superuser will move all objects
   in the current database which are in the tablespace.

   All objects to be moved will be locked immediately by the command.  The
   NOWAIT option, if specified, will cause the command to fail if it is unable
   to acquire the locks.

   System catalogs will not be moved by this command- individuals wishing to
   move a whole database should use ALTER DATABASE, or call ALTER TABLE on the
   individual system catalogs.  Note that relations in <literal>information_schema</literal>
   will be moved, just as any other normal database objects, if the user is the
   superuser or considered an owner of the relations in <literal>information_schema</literal>.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

  <variablelist>
   <varlistentry>
    <term><replaceable class="parameter">nom</replaceable></term>
    <listitem>
     <para>
      Le nom du tablespace.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">nouveau_nom</replaceable></term>
    <listitem>
     <para>
      Le nouveau nom du tablespace. Le nouveau nom ne peut pas débuter
      par <literal>pg_</literal> car ces noms sont réservés aux espaces
      logiques système.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">nouveau_propriétaire</replaceable></term>
    <listitem>
     <para>
      Le nouveau propriétaire du tablespace.
     </para>
    </listitem>
   </varlistentry>
   
   <varlistentry>
    <term><replaceable class="parameter">option_tablespace</replaceable></term>
    <listitem>
     <para>
      Un paramètre du tablespace à configurer ou réinitialiser. Actuellement,
      les seuls paramètres disponibles sont <varname>seq_page_cost</varname>
      et <varname>random_page_cost</varname>. Configurer une valeur pour un
      tablespace particulier surchargera l'estimation habituelle du
      planificateur pour le coût de lecture de pages pour les tables du
      tablespace, comme indiqué par les paramètres de configuration du même
      nom (voir <xref linkend="guc-seq-page-cost"/>, <xref
      linkend="guc-random-page-cost"/>). Ceci peut être utile si un tablespace
      se trouve sur un disque qui est plus rapide ou plus lent du reste du
      système d'entrées/sorties.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">role_name</replaceable></term>
    <listitem>
     <para>
      Role(s) whose objects are to be moved.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">new_tablespace</replaceable></term>
    <listitem>
     <para>
      The name of the tablespace to move objects into.  The user must have
      CREATE rights on the new tablespace to move objects into that
      tablespace, unless the tablespace being moved into is the default
      tablespace for the database connected to.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">NOWAIT</replaceable></term>
    <listitem>
     <para>
      The NOWAIT option causes the ALTER TABLESPACE command to fail immediately
      if it is unable to acquire the necessary lock on all of the objects being
      move.
     </para>
    </listitem>
   </varlistentry>

  </variablelist>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Renommer le tablespace <literal>espace_index</literal> en
   <literal>raid_rapide</literal>&nbsp;:
<programlisting>ALTER TABLESPACE espace_index RENAME TO raid_rapide;
</programlisting>
  </para>

  <para>
   Modifier le propriétaire du tablespace
   <literal>espace_index</literal>&nbsp;:
<programlisting>ALTER TABLESPACE espace_index OWNER TO mary;
</programlisting>
  </para>

  <para>
   Move all of the objects which I own from the default tablespace to
   the <literal>fast_raid</literal> tablespace:
<programlisting>
ALTER TABLESPACE pg_default MOVE ALL TO fast_raid;
</programlisting></para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   Il n'existe pas d'instruction <command>ALTER TABLESPACE</command> dans le
   standard SQL.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-createtablespace"/></member>
   <member><xref linkend="sql-droptablespace"/></member>
  </simplelist>
 </refsect1>
</refentry>
