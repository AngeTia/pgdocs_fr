<sect1 id="unaccent">
 <title>unaccent</title>

 <indexterm zone="unaccent">
  <primary>unaccent</primary>
 </indexterm>

 <para>
  <filename>unaccent</filename> is a text search dictionary that supprime les
  accents d'un lexeme. C'est un dictionnaire de filtre, ce qui signifie que sa
  sortie est passÃ©e au prochain dictionnaire (s'il y en a un), contrairement
  au comportement normal des dictionnaires. Cela permet le traitement des
  accents pour la recherche plein texte.
 </para>

 <para>
  L'implÃ©mentation actuelle d'<filename>unaccent</filename> ne peut pas Ãªtre
  utilisÃ©e comme un dictionnaire de normalisation pour un dictionnaire
  <filename>thesaurus</filename>.
 </para>
 
 <sect2>
  <title>Configuration</title>

  <para>
   Le dictionnaire <literal>unaccent</literal> accepte les options
   suivantes&nbsp;:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     <literal>RULES</literal> est le nom de base du fichier contenant la liste
     des rÃšgles de traduction. Ce fichier doit Ãªtre stockÃ© dans le rÃ©pertoire
     <filename>$SHAREDIR/tsearch_data/</filename> (<literal>$SHAREDIR</literal>
     Ã©tant le rÃ©pertoire des donnÃ©es partagÃ©es de
     <productname>PostgreSQL</productname>). Son nom doit se terminer avec
     l'extension <literal>.rules</literal> (qui ne doit pas Ãªtre inclus dans
     le paramÃštre <literal>RULES</literal>).
    </para>
   </listitem>
  </itemizedlist>
  <para>
   Le fichier des rÃšgles a le format suivant&nbsp;:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Chaque ligne reprÃ©sente une paire, consistant en un caractÃšre avec accent
     suivi par un caractÃšre sans accent. Le premier est traduit par le second.
     Par exemple&nbsp;:
    <programlisting>&Agrave;        A
&Aacute;        A
&Acirc;         A
&Atilde;        A
&Auml;          A
&Aring;         A
&AElig;         A</programlisting>
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Un exemple plus complet, qui est directement utile pour les langages
   europÃ©ens, se trouve dans <filename>unaccent.rules</filename>, qui est
   installÃ© dans le rÃ©pertoire <filename>$SHAREDIR/tsearch_data/</filename>
   une fois le module <filename>unaccent</filename> installÃ©.
  </para>
 </sect2>

 <sect2>
  <title>Utilisation</title>

  <para>
   L'exÃ©cution du script d'installation <filename>unaccent.sql</filename> crÃ©e
   un modÃšle de recherche de texte appelÃ© <literal>unaccent</literal> et un
   dictionnaire basÃ© sur ce modÃšle, appelÃ© lui-aussi
   <literal>unaccent</literal>. Le dictionnaire <literal>unaccent</literal> a
   le paramÃštre par dÃ©faut <literal>RULES='unaccent'</literal>, qui le rend
   directement utilisable avec le fichier standard
   <filename>unaccent.rules</filename>. Si vous le souhaitez, vous pouvez
   modifier le paramÃštre. Par exemple&nbsp;:

<programlisting>
ma_base=# ALTER TEXT SEARCH DICTIONARY unaccent (RULES='mes_regles');
</programlisting>

   Vous pouvez aussi crÃ©er des nouveaux dictionnaires basÃ©s sur le modÃšle.
  </para>

  <para>
   Pour tester le dictionnaire, vous pouvez essayer la requÃªte suivante&nbsp;:

<programlisting>
ma_base=# select ts_lexize('unaccent','HÃŽtel');
 ts_lexize 
-----------
 {Hotel}
(1 row)
</programlisting>
  </para>
  
  <para>
  Voici un exemple montrant comment installer le dictionnaire
  <filename>unaccent</filename> dans une configuration de recherche plein
  texte&nbsp;:
<programlisting>
ma_base=# CREATE TEXT SEARCH CONFIGURATION fr ( COPY = french );
ma_base=# ALTER TEXT SEARCH CONFIGURATION fr
        ALTER MAPPING FOR hword, hword_part, word
        WITH unaccent, french_stem;
ma_base=# select to_tsvector('fr','HÃŽtels de la Mer');
    to_tsvector    
-------------------
 'hotel':1 'mer':4
(1 row)

ma_base=# select to_tsvector('fr','HÃŽtel de la Mer') @@ to_tsquery('fr','Hotels');
 ?column? 
----------
 t
(1 row)
ma_base=# select ts_headline('fr','HÃŽtel de la Mer',to_tsquery('fr','Hotels'));
      ts_headline       
------------------------
  &lt;b&gt;HÃŽtel&lt;/b&gt;de la Mer
(1 row)

</programlisting>
  </para>
 </sect2>

 <sect2>
 <title>Fonctions</title>

 <para>
  La fonction <function>unaccent()</function> supprime les accents d'une
  chaÃ®ne de caractÃšres donnÃ©e. Il utilise le dictionnaire
  <filename>unaccent</filename> mais il peut Ãªtre utilisÃ© en dehors du
  contexte normal de la recherche plein texte.
 </para>

 <indexterm>
  <primary>unaccent</primary>
 </indexterm>

 <synopsis>
unaccent(<optional><replaceable class="PARAMETER">dictionary</replaceable>, </optional> <replaceable class="PARAMETER">string</replaceable>) returns <type>text</type>
 </synopsis>  

 <para>
<programlisting>
SELECT unaccent('unaccent','HÃŽtel');
SELECT unaccent('HÃŽtel');
</programlisting>
 </para>
 </sect2>

</sect1>
